// dados.js
// Banco de Dados Oficial - Extraído das Planilhas (12 Meses Base)
// Atualizado em: 2025

const LPU_DB = [];

// ==========================================
// 1. CONFIGURAÇÃO DE ESTADOS (GRUPOS)
// ==========================================
const UF_GROUPS = {
    // GRUPO 1: Padrão (Sul, Sudeste exceto RJ, Nordeste, Centro-Oeste)
    "SP": 1,
    "MG": 1,
    "ES": 1,
    "PR": 1,
    "SC": 1,
    "RS": 1,
    "DF": 1,
    "GO": 1,
    "MS": 1,
    "MT": 1,
    "BA": 1,
    "SE": 1,
    "AL": 1,
    "PE": 1,
    "PB": 1,
    "RN": 1,
    "CE": 1,
    "PI": 1,
    "MA": 1,

    // GRUPO 2: Pará e Tocantins
    "PA": 2,
    "TO": 2,

    // GRUPO 3: Norte (AC, AP, AM, RO)
    "AC": 3,
    "AP": 3,
    "AM": 3,
    "RO": 3,

    // GRUPO 4: Críticos (RJ e RR)
    "RJ": 4,
    "RR": 4
};

// ==========================================
// 2. TABELAS DE PREÇO (EXTRAÍDAS DAS PLANILHAS)
// ==========================================
// Formato: { m: Mensalidade (12 Meses), i: Instalação (12 Meses) }
// Nota: O sistema aplica desconto para 36/48/60 meses e isenção de instalação.

const PRICES_DB = {
    'Oi': {
        4: { g1: { ip: { m: 280, i: 1749 }, l2: { m: 342, i: 3148 }, bdl: { m: 256, i: 641 } }, g4: { ip: { m: 504, i: 2448 }, l2: { m: 628, i: 4950 }, bdl: { m: 353, i: 874 } } },
        5: { g1: { ip: { m: 280, i: 1749 }, l2: { m: 342, i: 3148 }, bdl: { m: 256, i: 641 } }, g4: { ip: { m: 504, i: 2448 }, l2: { m: 628, i: 4950 }, bdl: { m: 353, i: 874 } } },
        10: { g1: { ip: { m: 280, i: 1749 }, l2: { m: 342, i: 3148 }, bdl: { m: 256, i: 641 } }, g4: { ip: { m: 504, i: 2448 }, l2: { m: 628, i: 4950 }, bdl: { m: 353, i: 874 } } },
        20: { g1: { ip: { m: 338, i: 1749 }, l2: { m: 445, i: 3148 }, bdl: { m: 256, i: 641 } }, g4: { ip: { m: 609, i: 2448 }, l2: { m: 816, i: 4950 }, bdl: { m: 353, i: 874 } } },
        30: { g1: { ip: { m: 440, i: 2274 }, l2: { m: 651, i: 4093 }, bdl: { m: 256, i: 641 } }, g4: { ip: { m: 792, i: 3183 }, l2: { m: 1193, i: 6435 }, bdl: { m: 353, i: 874 } } },
        40: { g1: { ip: { m: 572, i: 2448 }, l2: { m: 822, i: 4408 }, bdl: { m: 256, i: 641 } }, g4: { ip: { m: 1030, i: 3428 }, l2: { m: 1508, i: 6930 }, bdl: { m: 353, i: 874 } } },
        50: { g1: { ip: { m: 743, i: 2448 }, l2: { m: 1028, i: 4408 }, bdl: { m: 256, i: 641 } }, g4: { ip: { m: 1205, i: 3428 }, l2: { m: 1885, i: 6930 }, bdl: { m: 353, i: 874 } } },
        100: { g1: { ip: { m: 967, i: 2448 }, l2: { m: 1370, i: 4408 }, bdl: { m: 256, i: 641 } }, g4: { ip: { m: 1566, i: 3428 }, l2: { m: 2513, i: 6930 }, bdl: { m: 353, i: 874 } } },
        200: { g1: { ip: { m: 1160, i: 3498 }, l2: { m: 1542, i: 5947 }, bdl: { m: 256, i: 641 } }, g4: { ip: { m: 1880, i: 4897 }, l2: { m: 2827, i: 7699 }, bdl: { m: 353, i: 874 } } },
        300: { g1: { ip: { m: 1392, i: 3498 }, l2: { m: 1645, i: 5947 }, bdl: { m: 323, i: 641 } }, g4: { ip: { m: 2256, i: 5387 }, l2: { m: 3016, i: 8470 }, bdl: { m: 445, i: 874 } } },
        400: { g1: { ip: { m: 1671, i: 4023 }, l2: { m: 1987, i: 6839 }, bdl: { m: 355, i: 641 } }, g4: { ip: { m: 2707, i: 5632 }, l2: { m: 3644, i: 8855 }, bdl: { m: 490, i: 874 } } },
        500: { g1: { ip: { m: 2005, i: 4198 }, l2: { m: 2639, i: 7137 }, bdl: { m: 391, i: 641 } }, g4: { ip: { m: 3249, i: 5877 }, l2: { m: 4838, i: 9240 }, bdl: { m: 539, i: 874 } } },
        1000: { g1: { ip: { m: 3028, i: 6997 }, l2: { m: 3770, i: 9795 }, bdl: { m: 508, i: 641 } }, g4: { ip: { m: 4906, i: 9795 }, l2: { m: 6911, i: 13200 }, bdl: { m: 700, i: 874 } } }
    },
    'Claro': {
        4: { g1: { ip: { m: 280, i: 1749 }, l2: { m: 326, i: 1749 }, bdl: { m: 256, i: 641 } }, g4: { ip: { m: 504, i: 2448 }, l2: { m: 598, i: 3206 }, bdl: { m: 353, i: 874 } } },
        5: { g1: { ip: { m: 280, i: 1749 }, l2: { m: 326, i: 1749 }, bdl: { m: 256, i: 641 } }, g4: { ip: { m: 504, i: 2448 }, l2: { m: 598, i: 3206 }, bdl: { m: 353, i: 874 } } },
        10: { g1: { ip: { m: 280, i: 1749 }, l2: { m: 326, i: 1749 }, bdl: { m: 256, i: 641 } }, g4: { ip: { m: 504, i: 2448 }, l2: { m: 598, i: 3206 }, bdl: { m: 353, i: 874 } } },
        20: { g1: { ip: { m: 338, i: 1749 }, l2: { m: 424, i: 1749 }, bdl: { m: 256, i: 641 } }, g4: { ip: { m: 609, i: 2448 }, l2: { m: 777, i: 3206 }, bdl: { m: 353, i: 874 } } },
        30: { g1: { ip: { m: 440, i: 2274 }, l2: { m: 620, i: 2274 }, bdl: { m: 256, i: 641 } }, g4: { ip: { m: 792, i: 3183 }, l2: { m: 1137, i: 3575 }, bdl: { m: 353, i: 874 } } },
        40: { g1: { ip: { m: 572, i: 2448 }, l2: { m: 783, i: 2448 }, bdl: { m: 256, i: 641 } }, g4: { ip: { m: 1030, i: 3428 }, l2: { m: 1436, i: 3850 }, bdl: { m: 353, i: 874 } } },
        50: { g1: { ip: { m: 743, i: 2448 }, l2: { m: 979, i: 2448 }, bdl: { m: 256, i: 641 } }, g4: { ip: { m: 1205, i: 3428 }, l2: { m: 1795, i: 3850 }, bdl: { m: 353, i: 874 } } },
        100: { g1: { ip: { m: 967, i: 2448 }, l2: { m: 1305, i: 2448 }, bdl: { m: 256, i: 641 } }, g4: { ip: { m: 1566, i: 3428 }, l2: { m: 2393, i: 3850 }, bdl: { m: 353, i: 874 } } },
        200: { g1: { ip: { m: 1160, i: 3498 }, l2: { m: 1468, i: 3498 }, bdl: { m: 256, i: 641 } }, g4: { ip: { m: 1880, i: 4897 }, l2: { m: 2692, i: 6413 }, bdl: { m: 353, i: 874 } } },
        300: { g1: { ip: { m: 1392, i: 3498 }, l2: { m: 1566, i: 2700 }, bdl: { m: 323, i: 641 } }, g4: { ip: { m: 2256, i: 5387 }, l2: { m: 2872, i: 6050 }, bdl: { m: 445, i: 874 } } },
        400: { g1: { ip: { m: 1671, i: 3449 }, l2: { m: 1893, i: 3450 }, bdl: { m: 355, i: 641 } }, g4: { ip: { m: 2707, i: 5632 }, l2: { m: 3470, i: 6325 }, bdl: { m: 490, i: 874 } } },
        500: { g1: { ip: { m: 2005, i: 3599 }, l2: { m: 2513, i: 3600 }, bdl: { m: 391, i: 641 } }, g4: { ip: { m: 3249, i: 5877 }, l2: { m: 4607, i: 6600 }, bdl: { m: 539, i: 874 } } },
        1000: { g1: { ip: { m: 3028, i: 5999 }, l2: { m: 3590, i: 6000 }, bdl: { m: 508, i: 641 } }, g4: { ip: { m: 4906, i: 9795 }, l2: { m: 6582, i: 11000 }, bdl: { m: 820, i: 874 } } }
    },
    'Cirion': {
        4: { g1: { ip: { m: 307, i: 4023 }, l2: { m: 337, i: 4023 }, bdl: { m: 207, i: 2243 } }, g4: { ip: { m: 578, i: 7055 }, l2: { m: 619, i: 7055 }, bdl: { m: 406, i: 2617 } } },
        5: { g1: { ip: { m: 307, i: 4023 }, l2: { m: 337, i: 4023 }, bdl: { m: 207, i: 2243 } }, g4: { ip: { m: 578, i: 7055 }, l2: { m: 619, i: 7055 }, bdl: { m: 406, i: 2617 } } },
        10: { g1: { ip: { m: 307, i: 4023 }, l2: { m: 337, i: 4023 }, bdl: { m: 207, i: 2243 } }, g4: { ip: { m: 578, i: 7055 }, l2: { m: 619, i: 7055 }, bdl: { m: 406, i: 2617 } } },
        20: { g1: { ip: { m: 393, i: 4023 }, l2: { m: 457, i: 4023 }, bdl: { m: 207, i: 2243 } }, g4: { ip: { m: 735, i: 7055 }, l2: { m: 837, i: 7055 }, bdl: { m: 406, i: 2617 } } },
        30: { g1: { ip: { m: 511, i: 5230 }, l2: { m: 677, i: 5230 }, bdl: { m: 207, i: 2243 } }, g4: { ip: { m: 955, i: 9172 }, l2: { m: 1242, i: 9172 }, bdl: { m: 406, i: 2617 } } },
        40: { g1: { ip: { m: 693, i: 5632 }, l2: { m: 870, i: 5632 }, bdl: { m: 207, i: 2243 } }, g4: { ip: { m: 1291, i: 9877 }, l2: { m: 1596, i: 9877 }, bdl: { m: 406, i: 2617 } } },
        50: { g1: { ip: { m: 944, i: 5632 }, l2: { m: 1109, i: 5632 }, bdl: { m: 207, i: 2243 } }, g4: { ip: { m: 1750, i: 9877 }, l2: { m: 2033, i: 9877 }, bdl: { m: 406, i: 2617 } } },
        100: { g1: { ip: { m: 1269, i: 5632 }, l2: { m: 1507, i: 5632 }, bdl: { m: 207, i: 2243 } }, g4: { ip: { m: 2347, i: 9877 }, l2: { m: 2763, i: 9877 }, bdl: { m: 406, i: 2617 } } },
        200: { g1: { ip: { m: 1553, i: 6647 }, l2: { m: 1700, i: 6647 }, bdl: { m: 207, i: 2243 } }, g4: { ip: { m: 2847, i: 12186 }, l2: { m: 3117, i: 12186 }, bdl: { m: 406, i: 2617 } } },
        300: { g1: { ip: { m: 1891, i: 6647 }, l2: { m: 1819, i: 6647 }, bdl: { m: 283, i: 2243 } }, g4: { ip: { m: 3442, i: 13405 }, l2: { m: 3319, i: 13405 }, bdl: { m: 545, i: 2617 } } },
        400: { g1: { ip: { m: 2277, i: 7644 }, l2: { m: 2204, i: 7644 }, bdl: { m: 308, i: 2243 } }, g4: { ip: { m: 4175, i: 14014 }, l2: { m: 4040, i: 14014 }, bdl: { m: 591, i: 2617 } } },
        500: { g1: { ip: { m: 2757, i: 7976 }, l2: { m: 2955, i: 7976 }, bdl: { m: 333, i: 2243 } }, g4: { ip: { m: 5056, i: 14623 }, l2: { m: 5418, i: 14623 }, bdl: { m: 638, i: 2617 } } },
        1000: { g1: { ip: { m: 4199, i: 11895 }, l2: { m: 4236, i: 11895 }, bdl: { m: 625, i: 2243 } }, g4: { ip: { m: 7699, i: 21807 }, l2: { m: 7767, i: 21807 }, bdl: { m: 1173, i: 2617 } } }
    },
    'Geral': {
        4: { g1: { ip: { m: 397, i: 1749 }, l2: { m: 397, i: 1749 }, bdl: { m: 253, i: 641 } }, g4: { ip: { m: 729, i: 3206 }, l2: { m: 729, i: 3206 }, bdl: { m: 434, i: 991 } } },
        5: { g1: { ip: { m: 397, i: 1749 }, l2: { m: 397, i: 1749 }, bdl: { m: 253, i: 641 } }, g4: { ip: { m: 729, i: 3206 }, l2: { m: 729, i: 3206 }, bdl: { m: 434, i: 991 } } },
        10: { g1: { ip: { m: 397, i: 1749 }, l2: { m: 397, i: 1749 }, bdl: { m: 253, i: 641 } }, g4: { ip: { m: 729, i: 3206 }, l2: { m: 729, i: 3206 }, bdl: { m: 434, i: 991 } } },
        20: { g1: { ip: { m: 481, i: 1749 }, l2: { m: 517, i: 1749 }, bdl: { m: 253, i: 641 } }, g4: { ip: { m: 881, i: 3206 }, l2: { m: 948, i: 3206 }, bdl: { m: 434, i: 991 } } },
        30: { g1: { ip: { m: 625, i: 2274 }, l2: { m: 755, i: 2274 }, bdl: { m: 253, i: 641 } }, g4: { ip: { m: 1146, i: 4169 }, l2: { m: 1385, i: 4169 }, bdl: { m: 434, i: 991 } } },
        40: { g1: { ip: { m: 813, i: 2448 }, l2: { m: 954, i: 2448 }, bdl: { m: 253, i: 641 } }, g4: { ip: { m: 1490, i: 4489 }, l2: { m: 1750, i: 4489 }, bdl: { m: 434, i: 991 } } },
        50: { g1: { ip: { m: 1057, i: 2448 }, l2: { m: 1193, i: 2448 }, bdl: { m: 253, i: 641 } }, g4: { ip: { m: 1937, i: 4489 }, l2: { m: 2188, i: 4489 }, bdl: { m: 434, i: 991 } } },
        100: { g1: { ip: { m: 1374, i: 2448 }, l2: { m: 1591, i: 2448 }, bdl: { m: 253, i: 641 } }, g4: { ip: { m: 2519, i: 4489 }, l2: { m: 2917, i: 4489 }, bdl: { m: 434, i: 991 } } },
        200: { g1: { ip: { m: 1649, i: 3498 }, l2: { m: 1790, i: 3498 }, bdl: { m: 253, i: 641 } }, g4: { ip: { m: 3023, i: 6413 }, l2: { m: 3282, i: 6413 }, bdl: { m: 434, i: 991 } } },
        300: { g1: { ip: { m: 1979, i: 3848 }, l2: { m: 1909, i: 3848 }, bdl: { m: 329, i: 641 } }, g4: { ip: { m: 3628, i: 7055 }, l2: { m: 3501, i: 7055 }, bdl: { m: 565, i: 991 } } },
        400: { g1: { ip: { m: 2374, i: 4023 }, l2: { m: 2307, i: 4023 }, bdl: { m: 354, i: 641 } }, g4: { ip: { m: 4353, i: 7376 }, l2: { m: 4230, i: 7376 }, bdl: { m: 608, i: 991 } } },
        500: { g1: { ip: { m: 2849, i: 4198 }, l2: { m: 3063, i: 4198 }, bdl: { m: 379, i: 641 } }, g4: { ip: { m: 5224, i: 7696 }, l2: { m: 5616, i: 7696 }, bdl: { m: 652, i: 991 } } },
        1000: { g1: { ip: { m: 4303, i: 6997 }, l2: { m: 4376, i: 6997 }, bdl: { m: 672, i: 641 } }, g4: { ip: { m: 7889, i: 12827 }, l2: { m: 8024, i: 12827 }, bdl: { m: 1154, i: 991 } } }
    },
    'Vivo': {
        4: { g1: { ip: { m: 280, i: 1749 }, l2: { m: 326, i: 1749 }, bdl: { m: 241, i: 641 } }, g4: { ip: { m: 504, i: 2448 }, l2: { m: 598, i: 3206 }, bdl: { m: 341, i: 874 } } },
        5: { g1: { ip: { m: 280, i: 1749 }, l2: { m: 326, i: 1749 }, bdl: { m: 241, i: 641 } }, g4: { ip: { m: 504, i: 2448 }, l2: { m: 598, i: 3206 }, bdl: { m: 341, i: 874 } } },
        10: { g1: { ip: { m: 280, i: 1749 }, l2: { m: 326, i: 1749 }, bdl: { m: 241, i: 641 } }, g4: { ip: { m: 504, i: 2448 }, l2: { m: 598, i: 3206 }, bdl: { m: 341, i: 874 } } },
        20: { g1: { ip: { m: 338, i: 1749 }, l2: { m: 424, i: 1749 }, bdl: { m: 241, i: 641 } }, g4: { ip: { m: 609, i: 2448 }, l2: { m: 777, i: 3206 }, bdl: { m: 341, i: 874 } } },
        30: { g1: { ip: { m: 440, i: 2274 }, l2: { m: 620, i: 2274 }, bdl: { m: 241, i: 641 } }, g4: { ip: { m: 792, i: 3183 }, l2: { m: 1137, i: 4169 }, bdl: { m: 341, i: 874 } } },
        40: { g1: { ip: { m: 572, i: 2448 }, l2: { m: 783, i: 2448 }, bdl: { m: 241, i: 641 } }, g4: { ip: { m: 1030, i: 3428 }, l2: { m: 1436, i: 3850 }, bdl: { m: 341, i: 874 } } },
        50: { g1: { ip: { m: 743, i: 2448 }, l2: { m: 979, i: 2448 }, bdl: { m: 241, i: 641 } }, g4: { ip: { m: 1205, i: 3428 }, l2: { m: 1795, i: 3850 }, bdl: { m: 341, i: 874 } } },
        100: { g1: { ip: { m: 967, i: 2448 }, l2: { m: 1305, i: 2100 }, bdl: { m: 241, i: 641 } }, g4: { ip: { m: 1566, i: 3428 }, l2: { m: 2393, i: 3850 }, bdl: { m: 341, i: 874 } } },
        200: { g1: { ip: { m: 1160, i: 3498 }, l2: { m: 1468, i: 3000 }, bdl: { m: 241, i: 641 } }, g4: { ip: { m: 1880, i: 4897 }, l2: { m: 2692, i: 5500 }, bdl: { m: 341, i: 874 } } },
        300: { g1: { ip: { m: 1392, i: 3498 }, l2: { m: 1566, i: 2700 }, bdl: { m: 298, i: 641 } }, g4: { ip: { m: 2256, i: 5387 }, l2: { m: 2872, i: 6050 }, bdl: { m: 427, i: 874 } } },
        400: { g1: { ip: { m: 1671, i: 3449 }, l2: { m: 1893, i: 3450 }, bdl: { m: 316, i: 641 } }, g4: { ip: { m: 2707, i: 5632 }, l2: { m: 3470, i: 6325 }, bdl: { m: 456, i: 874 } } },
        500: { g1: { ip: { m: 2005, i: 3599 }, l2: { m: 2513, i: 3600 }, bdl: { m: 335, i: 641 } }, g4: { ip: { m: 3249, i: 5877 }, l2: { m: 4607, i: 6600 }, bdl: { m: 485, i: 874 } } },
        1000: { g1: { ip: { m: 3028, i: 5999 }, l2: { m: 3590, i: 6000 }, bdl: { m: 555, i: 641 } }, g4: { ip: { m: 4906, i: 9795 }, l2: { m: 6582, i: 11000 }, bdl: { m: 820, i: 874 } } }
    }
};

// ==========================================
// 3. REGRAS DE PRAZO (DESCONTOS)
// ==========================================
// Baseado no fato de que os dados são de 12 meses.
const RULES = {
    // Multiplicador sobre o valor de 12 meses
    prazos: {
        12: 1.00, // Preço Cheio (Planilha)
        24: 0.90, // 10% Desconto
        36: 0.80, // 20% Desconto (Padrão 36m)
        48: 0.75, // 25% Desconto
        60: 0.70 // 30% Desconto
    },
    // Fator de cobrança da Instalação
    // 1.0 = Cobra Cheio | 0.0 = Isento
    instalacaoFator: {
        12: 1.0, // 12 meses: Cobra Instalação
        24: 0.5, // 24 meses: 50% Instalação
        36: 0.0, // 36 meses: Isento
        48: 0.0,
        60: 0.0
    }
};

// ==========================================
// 4. GERADOR (ENGINE)
// ==========================================

function gerarDB() {
    const prazos = [12, 24, 36, 48, 60];

    // Iterar Operadoras
    for (const [opNome, opDados] of Object.entries(PRICES_DB)) {

        // Iterar Velocidades
        for (const [velStr, velDados] of Object.entries(opDados)) {
            const vel = parseInt(velStr);

            // Iterar Grupos de UF (G1..G4)
            for (const [uf, grupoId] of Object.entries(UF_GROUPS)) {
                const grupoKey = `g${grupoId}`;

                // Tenta pegar dados do grupo específico, senão usa G1
                const dadosGrupo = velDados[grupoKey] || velDados['g1'];

                // Iterar Produtos (IP, L2, BDL)
                for (const [prodKey, valores] of Object.entries(dadosGrupo)) {
                    // Normaliza nome do produto
                    let prodNome = prodKey.toUpperCase();
                    if (prodNome === 'L2') prodNome = 'L2-MPLS';

                    // Gera linhas para cada prazo
                    prazos.forEach(prazo => {
                        const fatorMensal = RULES.prazos[prazo];
                        const fatorInst = RULES.instalacaoFator[prazo];

                        LPU_DB.push({
                            o: opNome,
                            p: prodNome,
                            u: uf,
                            d: prazo,
                            s: vel,
                            m: Math.round(valores.m * fatorMensal), // Mensalidade com desconto
                            i: Math.round(valores.i * fatorInst) // Instalação (cobrada ou isenta)
                        });
                    });
                }
            }
        }
    }
}

// Executar
gerarDB();

// Exportar
window.LPU_DB = LPU_DB;